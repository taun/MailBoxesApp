{\rtf1\ansi\ansicpg1252\cocoartf1265\cocoasubrtf210
{\fonttbl\f0\fmodern\fcharset0 Courier;\f1\fnil\fcharset0 LucidaGrande;\f2\fnil\fcharset0 Menlo-Regular;
\f3\fnil\fcharset0 Menlo-Bold;\f4\fnil\fcharset0 Menlo-Italic;\f5\fswiss\fcharset0 Helvetica;
\f6\fnil\fcharset0 Monaco;}
{\colortbl;\red255\green255\blue255;\red38\green38\blue38;\red237\green241\blue245;\red0\green116\blue0;
\red247\green247\blue247;\red196\green26\blue22;\red39\green78\blue192;\red255\green0\blue0;\red92\green38\blue153;
\red81\green112\blue255;}
\margl1440\margr1440\vieww18760\viewh15240\viewkind0
\deftab720
\pard\pardeftab720

\f0\fs24 \cf0 \
=============\
\pard\pardeftab720\sa320

\f1\b\fs28 \cf0 CATextLayer and subpixel anti-aliasing
\fs48 \

\f0\b0\fs24 Yes, it's possible, but there are two separate cases here:\
\pard\pardeftab720

\f1 \cf0 \
\pard\pardeftab720

\f0 \cf0 Case 1: If you're using a layer-backed NSTextField, then CATextLayer is not actually involved. Setting the NSTextField's backgroundColor to an opaque color is on the right track, but you also need to do set drawsBackground to YES for it to take effect. Then you should see subpixel AA in the rendered results. (This can even be done in IB using the NSTextField inspector.)
\f1 \
\

\f0 Case 2: If you're using a CATextLayer directly, you'll need to subclass CATextLayer and do something like the following in your drawing code:
\f1 \
\

\f0 - (void)drawInContext:(CGContextRef)ctx\
\{\
	CGContextSetRGBFillColor (ctx, r, g, b, a);\
	CGContextFillRect (ctx, [self bounds]);\
	CGContextSetShouldSmoothFonts (ctx, true);\
	[super drawInContext:ctx];\
\}\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f2\fs22 \cf0 \
==============\
Model the SideBar and use fetchedProperties?\
Add an entity for MailBoxReference, to be used in Favorites.\
Sort MailBox fetches by existence of SpecialUse flag (INBOX,SENT,TRASH), then alphabetical.\
Have all SideBar entities inherit MBTreeNode? (name, desc, parent, children, isGroup, isLeaf)\
\
==============\
\
How to use OutlineView as a sidebar source view is in the Lion ReleaseNotes for Cocoa AppKit.\
\
Add entity MBGroups as a new top level organizer.\
\
Types of Groups\
	Accounts - actual message accounts\
	SmartFolder - predicate based query results\
	Labels - automatic query created for each label in all accounts. Just query label entities and create predicate for each.\
	?\
\
Groups are Created upon application init\
Properties\
	Name\
	ToolTip\
	Description\
	Children - accounts, SmartFolders\
\
How to deal with different tree levels. SmartFolder is the desired content at top level but Account/LeafFolder is the desired level for Accounts. Drag and drop will only drag and drop a leaf. CurrentSelection portal only changes if selection is a leaf.\
\
Portal Types - really just views for group content\
	CurrentSelection - whatever folder or SmartFolder is currently selected in the Tree. A special Singleton portal.\
	AccountFolder - bound to the contents of a particular folder.\
	SmartFolder - bound to the predicate of a SmartFolder.\
	Events/Calendar - listing of a calendar. Different views and predicates available\
\
\
=============\
\
Private queue moc in app as top level parent\
MainQueue child moc for interface elements, nibmoc\
Private queue child moc for background imap updates, saves then calls root moc save\
\
No need for separate thread for imapclient. dispatch imapclient operations to private serial queue?\
\
DISPATCH_QUEUE_PIROITY_BACKGROUND - throttles io good for IMAP background sync.\
\
Test connection for each imapclient operation.\
	try to reconnect if disconnected\
	if using a message method, need to reselect mbox if disconnected\
	every message method includes a block which tests connection, tests current selected mbox?\
	or just cancel and depend on coordinator to start over sometime?\
	\
\
\pard\pardeftab720

\f1\fs24 \cf2 \cb3 Before saving the child MOC for the first time you can call -obtainPermanentIDsForObjects\
\

\f2\fs22 \cf0 \cb1 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural
\cf0 ============\
\
Fetch handling\
Create a managedObjectContext for async queue (lazy init?)\
create a async queue dispatch group at start of fetch command\
dispatch each fetch response async\
at command done, dispatch done status and wait for group completion\
\
same for flags/status update handling.\
same for body handling?\
\
To work, need to separate parsing and evaluation. \
Evaluation needs to have it's own copy of the tokens for concurrency.\
\
ManagedObjectContext can not be concurrent???? voids all of above??\
\
\
===========\
\
Perhaps have IMAPClient on the same thread. The IO is already asynchronous. \
But dispatch to a serial queue for the processing of the response?\
\
===========\
\
Voice Memo\
Separate Account Coordinator for each account.\
APPDelegate uses a dictionary keyed by accountObjectID for accountCoordinators.\
AccountCoordinator responsible for all account threads.\
Account model has relationship called Monitor (max 5) which is the set of mail boxes to monitor with a dedicated thread. Similar to subscribe. \
Need user interface/menu for selected mail box to add it to the monitor relationship.\
When a request for a body comes to the AccountCoordinator, it will check the existing mail box threads if there is no thread for the required message mail box, a new thread will be created and maintained open for x minutes for subsequent body requests. Timer resets after each request.\
AccountCoordinator \
	responsible for queueing commands to IMAPClient. 
\f3\b How to communicate with IMAPClient thread? use IMAPClient property commandQueue from AccountCoordinator.
\f2\b0 \
	responsible for syncing mail boxes. \
	needs to have a command queue for special real time requests like body. If there are no real time commands queued, queues a background sync quantized request. Need a way to sync piecemeal and and work down a list of priorities. \
	each mail box sync is a separate thread?\
\
\
==========\
\
**Need to update the message sequence property. Forgot to do so in fetch response.\
**Use bodystructure then body.peek[1.mime] then body.peek[1] ... rather than full downloads and parsing of full text\
**In first pass, do not get the size or bodystructure.\
\
1. Get header for all messages in groups from recent to oldest.\
2. Get bodystructure as above.\
3. Get mime information as above based on body structure.\
4. Depending on preference, populate body parts on demand or in background or both.\
\
Need to change model to accommodate mime parts\
  	add message property: mimeVersion Number x.x\
	add message property: contentType String or relation?\
	add message property: contentBoundary String\
\
		
\f0\fs26 version := "MIME-Version" ":" 1*DIGIT "." 1*DIGIT
\f2\fs22 \
\pard\pardeftab720

\f0\fs26 \cf0 MIME-Version: 1.0\
     MIME-Version: 1.0 (produced by MetaSend Vx.x)\
     MIME-Version: (produced by MetaSend Vx.x) 1.0\
     MIME-Version: 1.(produced by MetaSend Vx.x)0\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f2\fs22 \cf0 \
==========\
\
**SELECT and EXAMINE read-only read-write status should be per-thread not a mail box property.\
	\
==========\
\
**Should not select same mail box from same client on separate threads.\
  This means on demand body loading needs to be injected into sync thread? Ignore?\
\
==========\
\
\
Separate modular xib for message view\
--------\
[Message Contents]\
	From:						Sent:\
	To:						Received:\
\
[Button For Envelope]\
\
Subject:\
Body:\
\
\
[Envelope][Button for Contents]\
 View that looks like an envelope with the RFC envelope details.\
 Animated flip between envelope and contents\
\
------------\
Message View can be in main pane or standalone window.\
Main pane can have tabs for multiple message views\
\
When selecting a message, check for a nil body.\
If Body == nil, dispatchSync to fetch body before returning.\
\
Does IMAPClient context contain changes from other threads?\
Does it need to be recreated/reset each iteration?\
\
\
\
\pard\tx560\pardeftab560\pardirnatural
\cf4 \CocoaLigature0 IMAP4rev1 notes from rfc 3501 \
\
    +----------------------+\
     |connection established|\
     +----------------------+\
                ||\
                \\/\
 +--------------------------------------+\
 |          server greeting             |\
 +--------------------------------------+\
        || (1)          || (2)        || (3)\
        \\/              ||            ||\
 +-----------------+    ||            ||\
 |Not Authenticated|    ||            ||\
 +-----------------+    ||            ||\
  || (7)   || (4)       ||            ||\
  ||       \\/           \\/            ||\
  ||     +----------------+           ||\
  ||     | Authenticated  |<=++       ||\
  ||     +----------------+  ||       ||\
  ||       || (7)   || (5)   || (6)   ||\
  ||       ||       \\/       ||       ||\
  ||       ||    +--------+  ||       ||\
  ||       ||    |Selected|==++       ||\
  ||       ||    +--------+           ||\
  ||       ||       || (7)            ||\
  \\/       \\/       \\/                \\/\
 +--------------------------------------+\
 |               Logout                 |\
 +--------------------------------------+\
                   ||\
                   \\/\
     +-------------------------------+\
     |both sides close the connection|\
     +-------------------------------+\
 \
 State Transitions\
 (1) connection without pre-authentication (OK greeting)\
 (2) pre-authenticated connection (PREAUTH greeting)\
 (3) rejected connection (BYE greeting)\
 (4) successful LOGIN or AUTHENTICATE command\
 (5) successful SELECT or EXAMINE command\
 (6) CLOSE command, or failed SELECT or EXAMINE command\
 (7) LOGOUT command, server shutdown, or connection closed\
 \
 IMAPrev4 specifies state only changes if command is successful,\
 losing network connection or server does bye.\
\
\
 State Machine:\
    want to implement a state machine\
        Current State?possible transitions   ->Next State(as selector string)\
                                            ->Next State(as selector string)\
        lookup transition for current state and execute selector\
    each state has conditions\
    each conditions has transition selector and transition state\
 \
    State machine instantiated by IMAPClient or Connection? with IMAPClient as delegate?\
    Put state transition on synchronous queue?\
 \
    Timed state transitions for connection timeouts? or NSRunLoop Timers?\
 \
 Error Handling:\
    Need to deal with stream and response errors.\
        Retry or close stream and client?\
        How to pass error back up to coordinator and UI if needed?\
 \
 Refactor:\
    IMAPClient splits to\
        IMAPClient - handles client state, core data, changes state based on response status (ok bad ..).\
        IMAPConnection - handles the streaming, takes commands and returns parsed response.\
                        want response to be parsed just by feeding response buffer to a IMAPParsedResponse initOnData: .\
                        then query response properties - status, command complete, values, ...\
 \
 Parser:\
    MAP4rev1 data can be in one of several forms: atom, number, string, parenthesized list, or NIL.\
    Parse capability response\
 \
 \
 IMAPCommand should be a class? \
    Command arguments\
    Acceptable states and state transition for given response -> selector?\
    Parser stored with IMAPCommand model\
    Command response type? How to deal with interjected server responses?\
 \
 \
 Command queued\
 Is command valid for state\
 Submit command to client stream\
 Wait for response\
 Run command specified parser on response\
 Run command specified state transition on parser result?\
 Most responses will result in the data requested by the command and needed by the client:\
    folder names, structure and status, message headers body, ....\
 \
 High level application commands:\
    fetch/synchronize account headers uid=x###-y### (login, get structure, flags, transfer to core data, ...)\
    fetch/synchronize account body uid=x###-y### (above but include body, ...)\
    fetch/synchronize account attachments uid=ix###-j### (above but include attachments, ...)\
    fetch message body uid=ix###-j### (fault on core data body)\
    fetch message attachments uid=ix###-j### (fault on core data attachment link)\
    message change flags status uid (recent, read, unread, ..)\
    message change label uid (??)\
    message copy uid=ix###-j### (ui drag and drop or copy)\
    message delete uid=ix###-j### (?? not used except with a move because moved to trash where expunged?)\
    message move uid=ix###-j### (copy followed by delete)\
    message append (new message composed and sent)\
    folder create\
    folder rename uid \
    folder copy?\
    folder move\
    folder delete\
 \
 Synchronization features of IMAP\
 \
\
\pard\pardeftab720

\f0\fs26 \cf0 \CocoaLigature1 7.2.2. LIST Response
\f2\fs22 \cf4 \CocoaLigature0 \
\pard\tx560\pardeftab560\pardirnatural
\cf4 \
\pard\pardeftab720

\f0\fs26 \cf0 \CocoaLigature1 	\\Marked\
         The mailbox has been marked "interesting" by the server; the\
         mailbox probably contains messages that have been added since\
         the last time the mailbox was selected.\
      \\Unmarked\
         The mailbox does not contain any additional messages since the\
         last time the mailbox was selected.\
\pard\tx560\pardeftab560\pardirnatural

\f2\fs22 \cf0 \
\pard\pardeftab720

\f0\fs26 \cf0 The only reliable way to identify recent messages is to\
           look at message flags to see which have the \\Recent flag\
           set, or to do a SEARCH RECENT.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f2\fs22 \cf0 \
\
\
How About??\
Model classes for IMAP objects - server, mailbox/folder, message\
Models access client stream directly and handle full command communication.\
Base class which has parsing, response, state methods\
Helper class for the core data models?\
Map core data class to helper class.\
Stream events sent to current IMAP object for handling\
\
Initially IMAPAccount is current model for connect, login, authentication, list, search, flags.\
\
\
\
Base pseudo flow\
	Send a command\
	Get response - connect starts here, no command sent\
	Parse line by line\
	Is first line * BAD, * NO, * BYE, * OK, * none of previous, +, or tagged a000x (no *)\
		BAD - handle command failure, due to bad or invalid command in current state\
		NO - handle error due to can't perform command with data or rights\
		BYE - handle server disconnect.\
		OK - handle server untagged response - do something with data - update model?\
		* command + data - depending on command, parse line data plus get subsequent data. do something with data? update model?\
		+ - command continue - send next command part\
		tagged - handle command completion response - do something with data - trigger post command completion method?\
\
\
\pard\tx560\pardeftab560\pardirnatural

\f4\i \cf0 Separate IMAPClient class for each account type?\
	IMAPClient\
		GMailClient - specialized folder handling\
		YahooClient - ?\
\
\
\
\
Sync strategy notes\
\
Command: uid fetch 1:"UIDNEXTValue" (uid)\
returns a very fast list of all UIDs. This list would show which messages exist and which don't. This can be used to detect purged messages. How about moved messages? Each folder has it's own range of UIDs. Use NSSet functions to check for missing messages? Create a set from all of the responses then when command is complete, compare Core Data set to response set. Need a way to queue a post command command? Use a block.\
\
Initial sync:\
	Select folder and save UIDNext & UIDValidity response (Compare UIDValidity and if different, set maxCachedUID to 1)\
	Fetch Envelopes from maxCachedUID:serverUIDNext - maxCachedUID defaults to 1\
	Create messages and store envelope data\
	Set maxCachedUID to last UID.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f2\i0 \cf0 	When done get all messages with nil body and start fetching the rest of the message from highest UID to lowest in background.\
	When done go into idle mode?
\f5\fs24 \
\
***When offline, folders are read-only! Avoid sync issues. Can read, delete and compose messages, just not re-arrange.\
 Need a core-data persistent queue which has a list of folder/messages to be deleted. Perhaps another message flag?\
\
2013-07-31\
 Command to test ssl\
 ganymede:Notes taun$ openssl s_client -crlf -CAfile StarfieldClass2CertificationAuthority.pem -showcerts -verify 5 -connect mail.charcoalia.net:993\
\
 Trying to fix NSStream communication, ssl is not yet working. Gives a certificate error. Needs the commercial root certificate locally.\
\
 ?? Why doesn't App recognize the "Starfield Class 2 Certification Authority" Root CA as trusted? Even openssl needs a manual override but Safari does not.\
\
\pard\pardeftab720\sl220
\cf0 \cb5 2013--8-01\
 Changed commandLogin to check for AUTH=Plain or AUTH=login\
 \cb1 \strike \strikec0 Started to switch to CocoaAsyncSocket then realized could still use NSStream if mixing with CFNetwork code.\cb5 \strike0\striked0 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural
\cf0  \cb1 \strike \strikec0 Need to switch branch back to ARC and merge. \strike0\striked0 Never created CocoaAsync branch???\cb5 \
\pard\pardeftab720\sl220
\cf0  \cb1 \strike \strikec0 Remove CocoaAsync from ARC branch.\cb5 \strike0\striked0 \
 \cb1 \strike \strikec0 Fix autolayout constraints of message view. Change to new XCode5 autolayout?\cb5 \strike0\striked0 \
 \cb1 \strike \strikec0 Why doesn't the refreshed email list sort by date?\cb5 \strike0\striked0 \
\
2013-08-02\
	Message outline view? What was it for? Attachments? Threads?\
		Solved? List of Images, Attachments, links contained in email.\
		TODO: add above content to outline view.\
	\cb1 \strike \strikec0 How to detect when the portal NSArray controller content changes? What to monitor?\cb5 \strike0\striked0 \
2013-08-03\
	\cb1 \strike \strikec0 Can't figure out how to get to the portal NSArrayController from the appDelegate to rearrange objects.\cb5 \strike0\striked0 \
		solved. 
\b \cb1 [self.collectionView itemAtIndex:]
\b0 \cb5  returns the MBPortalViewController rather than the represented item which is returned by collectionView.content.\
	\cb1 \strike \strikec0 Why doesn't the refreshed email list sort by date? \
		\cb5 \strike0\striked0 ** Solved - Needed to turn off "Uses lazy fetching" for messagesController in MBVPortal.xib. \
	\cb1 \strike \strikec0 ??? Also can't figure out how the default portal gets a filter predicate or sorting.\cb5 \strike0\striked0 \
		Solved - default portal is just returning ALL MBMessage entities.\
		TODO: configure a fetchPredicate for messagesController. Get from MBViewPortal class or subclass\
2013-08-05\
	Default assigned portal is supposed to be a MBViewSelectionPortal - shows the latest selection. but it does not change with selections!\
	! Change default predicate to nil and use the Sidebar selection. Upon sidebar selection changed, search Collection for MBViewSelectionPortal and change selection.\
	! Add debug menu - commands: Reset mailStore, Reset CoreData, Reset Portals?\
	!! Need MBMessage fetchRequests or MBViewPortal fetchRequests to get the messages corresponding to the portal!\
\
	\cb1 \strike \strikec0 Define sidebarDelegate protocol - folderSelectionChanged: (id) newSelection\cb5 \strike0\striked0 \
	Add sidebarDelegate protocol to AppDelegate\
	AppDelegate implementation needs to find MBViewPortalSelection and change fetchPredicate to work with new folder selection.\
		MBViewPortalController needs to get fetchPredicate from representedItem.\
	Add implementation to MBSidebarController to call folderSelectionChanged:\
2013-08-20\
	Made MBVPortal.xib messagesController Content set = self.representedObject.messageArraySource.messages\
2013-08-26\
	If network is available, update mailbox content when selecting.\
	Eliminate refresh button and update mail automatically whenever the network is available.\
	How to monitor network status, then imap server status?\
	Option to get all mail or just some.\
2013-09-01\
	\cb1 \strike \strikec0 Need to check IMAP syntax for select command "How to quote folders with spaces or other special characters?"\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural
\cf0 	 \strike0\striked0 Quoting all mailbox paths before sending to server.\cb5 \
\pard\pardeftab720\sl220
\cf0 2013-09-13\
	\cb1 \strike \strikec0 Change defaultContent property to bodyUpdates property. increment bodyUpdates for each update then observe changes to bodyUpdates in message view.\
	Remove defaultContent property. Monitoring data directly.\cb5 \strike0\striked0 \
	\cb1 \strike \strikec0 Need to fix message body view content frame. Currently (0,0). Set to holder frame size. Inset message body view and add shadow. \cb5 \strike0\striked0 \
	Add message popover to give "full window" view of message.\
	Ultimately, would like a tab view for messages window. Just like safari browser tabs.\
	Indicate whether mime data is loaded in outline view.\
	\cb1 \strike \strikec0 Default outline view to expanded.\cb5 \strike0\striked0 \
	User Preference for default mimetype to display if none selected.\
	Change envelope view to be top of message and scroll with message. Like a letterhead.\
	?How to remove "=20" from subject and address data???\
	Address parsing\
2013-09-15\
	MIME  Message Header Extensions for Non-ASCII Text (RFC 2047)\
	encoded-word = "=?" charset "?" encoding "?" encoded-text "?="\
	\
	An \'92encoded-word\'92 may not be more than 75 characters long, including\
   \'92charset\'92, \'92encoding\'92, \'92encoded-text\'92, and delimiters.  If it is\
   desirable to encode more text than will fit in an \'92encoded-word\'92 of\
   75 characters, multiple \'92encoded-word\'92s (separated by CRLF SPACE) may\
   be used.\
\
   While there is no limit to the length of a multiple-line header\
   field, each line of a header field that contains one or more\
   \'92encoded-word\'92s is limited to 76 characters.\
\
	The "B" encoding is identical to the "BASE64" encoding defined by RFC\
   2045.\
\
	The "Q" encoding is similar to the "Quoted-Printable" content-\
   transfer-encoding defined in RFC 2045.  It is designed to allow text\
   containing mostly ASCII characters to be decipherable on an ASCII\
   terminal without decoding.\
   (1) Any 8-bit value may be represented by a "=" followed by two\
       hexadecimal digits.  For example, if the character set in use\
       were ISO-8859-1, the "=" character would thus be encoded as\
       "=3D", and a SPACE by "=20".  (Upper case should be used for\
       hexadecimal digits "A" through "F".)\
   (2) The 8-bit hexadecimal value 20 (e.g., ISO-8859-1 SPACE) may be\
       represented as "_" (underscore, ASCII 95.).  (This character may\
       not pass through some internetwork mail gateways, but its use\
       will greatly enhance readability of "Q" encoded data with mail\
       readers that do not support this encoding.)  Note that the "_"\
       always represents hexadecimal 20, even if the SPACE character\
       occupies a different code position in the character set in use.\
\
\
	RegEx = "=\\?.*\\?.*\\?.*\\?="\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs26 \cf0 \cb1 \
\pard\pardeftab720\sl220

\f5\fs24 \cf0 \cb5 	Samples: \
	See: ~/Development/XCodeDev/MailBoxes/MailBoxesApp/MailBoxes/LogicTests/answers/sampleRfc2047ExtendedHeaders.txt\
\
Subject: =?utf-8?Q?Your=20Wyndham=20Vacation=20is=20Almost=20Here=20-=20Resort=20Details=20Enclosed!?=\
\
From: "=?utf-8?Q?Wyndham=20Vacation=20Resorts?=" <reservationprearrivals@wyndhamvacationresorts.com>\
\
From: =?utf-8?Q?customerservice@entertainmentbenefits.com?=\
\
Subject:	=?iso-8859-1?Q?Mail=2Echarcoalia=2Enet=A0?=\
\
Subject: =?UTF-8?B?MTQgY291cG9ucyBhcmUgd2FpdGluZy4gQ291cG9uIGxvdmVycyA=?=\
	=?UTF-8?B?cmVqb2ljZSE=?=\
\
To: =?UTF-8?Q?The_general-purpose_Squ?=\
	=?UTF-8?Q?eak_developers_list=C2=A0=C2=A0=C2=A0=C2=A0?=\
	<squeak-dev@lists.squeakfoundation.org>\
\
Thread-Topic: [squeak-dev] Something in the update process damages\
	=?ISO-8859-1?B?dGhloKCgoGJhY2tncm91bmQ=?=\
\
Subject: Re: [squeak-dev] Something in the update process damages\
	=?ISO-8859-1?B?dGhloKCgoGJhY2tncm91bmQ=?=\
\
Received: =?utf-8?Q?from=20=5B208=2E253=2E59=2E254=5D=20by=20m1=2Ecampaignmonitor?=\
	=?utf-8?Q?=2Ecom=20via=20HTTP;=20Thu,=2025=20Aug=202005=2006:03:12=20+1?=\
	=?utf-8?Q?000?=\
\
Subject: =?UTF-8?B?QUFBIFRyYXZlbCBEZWFscyDigJMgU2F2ZSBvbiByaXZlciBjcnVp?=\
 =?UTF-8?B?c2VzLCBnZXQgRlJFRSB1cGdyYWRlcyBvbiBQcmluY2VzcyBjcnVpc2VzIGFu?=\
 =?UTF-8?B?ZCBtb3JlIQ==?=\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0\fs26 \cf0 \cb1 \
\pard\pardeftab720\sl220

\f5\fs24 \cf0 \cb5 2013-09-16\
	Note: html import needs to be on the main thread/queue?\
	Create MBMIMETransformer class - detects and converts header charsets, base 64, ..\
	Create a test for header conversion to use while developing MBMIMETransformer class.\
	Review handling of "RFC822.HEADER" after parser returns tokens. How is subject: handled?\
2013-09-17\
	** In order to perform database searches, headers such as subject, from, to, should be stored as UTF8. \
		Therefore, need to convert to UTF8 before storing in CoreData.\
		Would need to MIME encode before sending composed email. (Just encode directly as UTF8 or binary)\
	Regex Tests\
		Simple works - =\\?(.*)\\?([qQbB])\\?(.*)\\?=\
				=\\?(.*)\\?(B\\?[+/0-9A-Za-z]*=*|Q\\?[ ->@-~]*\\\\)\\?=\
		Trying: "=\\?([A-Z0-9\\-]+)\\?([bB]\\?[+/0-9A-Za-z]*=*|[qQ]\\?[ ->@-~]*\\\\)\\?="\
2013-09-21\
	*** \cb1 \strike \strikec0 NSData initWithBase64EncodedString:options:\cb5 \strike0\striked0 \
	*** Note: "
\i \cb1 When displaying a particular header field that contains multiple\
  			 \'92encoded-word\'92s, any \'92linear-white-space\'92 that separates a pair of\
   			
\i0\b adjacent
\i\b0  \'92encoded-word\'92s is ignored
\i0 \cb5 ."\
	\cb1 \strike \strikec0 Need to detect adjacent encoded-words and remove whitespace.\cb5 \strike0\striked0 \
	\cb1 \strike \strikec0 Do during the regex matching aggregating phase. If the substring between captures is whitespace, do not append it.\
\cb5 \strike0\striked0 2013-09-24\
	Changing code bookmarks from "// TODO: ..." to "#pragma message <# message #>"\
		Code now shows up in issues list rather than just method navigator. Can see all messages with code issues.\
	Installed and configured https://github.com/tomaz/appledoc for XCode5GM\
	https://github.com/tomaz/appledoc/blob/master/XcodeIntegrationScript.markdown\
	http://gentlebytes.com/appledoc/\
	http://simplicate.weebly.com/1/post/2013/07/using-appledoc-to-generate-xcode-help-part-2.html\
\
	When to process encoded headers. In IMAPResponse or IMAPResponseBuffer or When saving as Core Data properties?\
	When saving as Core Data properties may be best?\
	Has to be after parsing. Decoding changes the text and may be un-parseable after decoding. Means after Buffer tokenizing.\
	Whether it is just before sending to Core Date from IMAPResponse or just after receiving at Core Data. It is the same point in the process. Just a matter of which is cleaner and more robust. Either way, the header are to be stored decoded.\
	At the Core Data stage is definitely easier. IMAPResponse doesn't know about headers. It is just passing dictionary keys and values.\
	***Can all charsets be converted to UTF8 by transformer and stored as UTF8? Even ISO and RU? Makes searching and indexing better.\
2013-09-26\
	MacBook Air - need to install AppleDoc & OS X 10.9 SDK\
	Revise Summary, 
\f2\fs22 \cf6 \cb1 \CocoaLigature0 ToDo: Perhaps get first 2 lines of text portion of body when fetching headers?
\f5\fs24 \cf0 \cb5 \CocoaLigature1 \
	Added Encoded Word decoding at the MBMessage setProperties level.\
2013-09-27\
	Changed build settings for tests to remove $(BUNDLE_LOADER) in TEST_HOST. Was causing double loading of classes.\
	Tests pass with new MBMIME2047ValueTransformer class and OS X 10.8 deployment, 10.9 base SDK.\
	Address decoding and parsing to email, name, domain, mailbox, now done.\
	Next: Need to handle address lists. Treat every address field as a list parse to individual emails then send each email to the RFC822 parser finished above.\
2013-10-01\
	Improved portal fonts and layout. \
2013-10-03\
	Now parses standard flags.\
	Indicates \\Seen and \\Flag by color icon in portal listing.\
	Can display an image in the Message view.\
	**Still need to decode MIME encoded body text.\
	**PDF Handling, use PDF Kit\
	How to parse body to show message & attachment properly?\
		Multi-part alternate (one or the other) mixed (has attachment)\
	How to handle "\\Seen"?\
		Cases: \
			1. Seen remotely and needs notification locally.\
			2. Seen locally and needs to update IMAP server.\
2013-10-04\
	Figured out PDF and MSWord display\
	** How to display multipart enriched text RFC 1896\
	** Check mime part "Content Disposition" inline? ???\
	TextEnriched - create a NSAttributedString category method to init from text/enriched data\
		method uses a mutable attributed string to build and then return a non-mutable copy\
		scan input string word by word and copy non-tag words to new mutable attributable string.\
		create an attribute and set start range (from new string) for each start tag found, set end range when end tag found.\
		need to handle line unfolding.\
		Stack or array of attributed strings 'joined' by space at end of decoding?\
	**** TRY 
\f0\fs26 \cb1 - (id)initWithData:({\field{\*\fldinst{HYPERLINK "file:///Users/taun/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10.9.CoreReference.docset/Contents/Resources/Documents/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSData"}}{\fldrslt \cf7 NSData}} *)
\f1 data
\f0  options:({\field{\*\fldinst{HYPERLINK "file:///Users/taun/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10.9.CoreReference.docset/Contents/Resources/Documents/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDictionary"}}{\fldrslt \cf7 NSDictionary}} *)
\f1 options
\f0  documentAttributes:({\field{\*\fldinst{HYPERLINK "file:///Users/taun/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10.9.CoreReference.docset/Contents/Resources/Documents/documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSDictionary"}}{\fldrslt \cf7 NSDictionary}} **)
\f1 docAttributes
\f0  error:({\field{\*\fldinst{HYPERLINK "file:///Users/taun/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10.9.CoreReference.docset/Contents/Resources/Documents/documentation/Cocoa/Reference/Foundation/Classes/NSError_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSError"}}{\fldrslt \cf7 NSError}} **)
\f1 error
\f5\fs24 \cb5 \
2013-10-08\
	*Should not have BOTH isInline and isAttachment. Just use isInline.\
2013-10-15\
	Conversion method for "text/enriched" and "text/html, 
\f6 \cb1 Content-Transfer-Encoding: quoted-printable
\f5 \cb5 "\
	Archive/Au Pair email number 2 has wrong encoding. It has 7 bit encoding when the email source sets no encoding.\
          Encoding is redundant. Property in MIMEType and MIMEData.\
	Mime subTypes should be subclasses?\
2013-10-17\
	**Refresh display if message is no longer working.\
2013-10-28\
	Spent last 10 days on Qualcomm paperwork.\
	Design message component views, use view hierarchy - Message textView, richView, outlineView, conversationView, rawView, MimePart textView, richView, attachmentView? ???, Header textView, richView, hopsView, \
2014-01-11\
	First look since October. All Qualcomm, Zimbra and Plone related work.\
	Was trying to make message view look like a letter. In particular, the header layout.\
	Was having trouble with AutoLayout!\
	Learned - don't trim message view, that is what the NSClipView is for!\
2014-01-14\
	Scroll views and messageView\
		Create enclosing view class with white background to hold MBMimeMessageView? mimeMessage is true size.\
		Enclosing view is never smaller than window and never smaller than mimeMessage. Whichever is largest.\
		This allows multiple mimeMessages in the top level view. ie. Conversation view or showing list of messages.\
		Make messageView at least as large as view window and put header and mime content at top left of top level message view.\
		messageView should not shrink less than the min content size.\
		messageViews bigger than the view window are their natural size.\
		Then add the messageView as documentView to the scroll view. This will set the clipView frame.\
	How to influence intrinsic size?\
		want header to have a minimum and maximum size for autolayout set by the class not in IB. Review autolayout instrinsic size of class\
		want body to have a minimum and maximum size for autolayout.\
		Which is master for widths? header or body? \
			body min might be > header min, use body min.\
			body max might be > header max, allow body to be bigger and keep header at max, like a left justified tab.\
		Future Notes -\
			Header view class with header xib, ability to show details\
			Multiple mime views without xib\
2014-01-20\
	\cf8 Use more ValueTransformers\cf0 !\
2014-01-30\
	Finally figured out how to make the NSTextView within a view within a scrollView work.\
	Needed create an NSTextView subclass and set the intrinsicContentSize property whenever the view frame was changed.\
	Added an observer on itself for when the frame changes then invalidate the intrinsicContentSize.\
	
\f1 \uc0\u10003 
\f5  NEW PROBLEM - some messages do not have mime types or parts.\
		[IMAPClient 
\f2\fs22 \cb1 \CocoaLigature0 loadFullMessageID: (\cf9 NSManagedObjectID\cf0 *) objectID] checks for the part.bodyIndex\

\f5\fs24 \cb5 \CocoaLigature1 		The simplest non-mime messages have no bodyIndex.\
		Don't seem to be able to use 
\f2\fs22 \cb1 \CocoaLigature0 [IMAPClient commandFetchContentForUID:(\cf9 UInt64\cf0 )theUID mimeParts:(\cf9 NSString\cf0  *)part]
\f5\fs24 \cb5 \CocoaLigature1 \
		Need to research the IMAP protocol for a simple message.\
	
\f1 \uc0\u10003 
\f5  Fixed - bodyIndex was initialized to "" rather than "1" and code was ignoring bodyIndex of "". Initialized to "1"\
		was wrong fix. Fixed correctly 2014-02-11\
2014-02-04\
	Working parts outline popover\
	Working plain text view with window resizing.\
	Autolayout for all elements now seems to work. Split views have different hugging priorities to allow one to widen while the other stays static.\
	
\f1 \uc0\u10003 
\f5  
\b \cb1 PLUGINS
\b0 \cb5 \
		want to use plugins for mime viewers and transforms making it easier to add views and transforms for new types.\
		If their is a viewer for a mime type, use it, otherwise show an icon?\
		Transforms should be part of plugin framework so they can be used by viewers? Maybe later. ****\
		Plugin will have a base mimeView container to hold custom view.\
		Create a proxy object for the Mime object and data?\
		Set mimeProxy prior to passing to viewer plugin. Viewer needs to observer data for updates.\
2014-02-08\
	
\f1 \uc0\u10003 
\f5  Problem - multiPart Alternative mime has encoded data when it shouldn't. Should only have child nodes.\
		Check parsing and decoding of multipart/alternative\
	
\f1 \uc0\u10003 
\f5  Change pluginBaseView init method to include options and attributes.\
2014-02-11\
	
\f1 \uc0\u10003 
\f5  Problem - simple plain text message structure saves with no body index.\
		when getting part, index is 1 meaning it does not get placed properly.\
		need a simple plain text message to have index of 1.\
		inspect parsing of body structure.\
2014-02-18\
	Drag and drop\
		implement MBoxProxy for writing and reading from Pasteboard\
		in SidebarView -> write MBoxProxy to pasteboard\
		in PortalsCollection -> read MBoxProxy from pasteboard and create suitable Portal\
	Using MBoxProxy so we can read and write/pass minimal necessary string information rather than full Mbox structure with nodes, .....\
	Once working, repeat for other types\
2014-02-20\
	Tip: NSOrderedSet workarounds\
		Bound to array controller content using model key path "self.portals.@array" where "portals" is the NSOrderedSet\
		**CoreData [NSSet intersectsSet:]: set argument is not an NSSet error\
		Tip: Fixed by inverting assignment. "child.parent = parent" rather than "[parent addChildsObject: child]"\
2014-02-22\
	
\f1 \uc0\u10003  
\f5 Problem - not decoding base64 text/html of multipart/related\
\
\pard\tx529\pardeftab529\pardirnatural

\f2\fs22 \cf0 \cb1 \CocoaLigature0    subject = "Re: Picture for the Westonian";\
    summary = "Return-Path: kris.batley@westtown.edu\
	Received: from mz0.moedae.com (LHLO mail.charcoalia.net) (68.238.253.173) by mail.charcoalia.net with LMTP; Thu, 20 Feb 2014 11:32:23 -0500 (EST)\
	Received: from";\
    uid = 760003;\
\pard\tx529\pardeftab529\pardirnatural

\f5\fs24 \cf0 \cb5 \CocoaLigature1 \

\f3\b\fs22 \cf10 \cb1 \CocoaLigature0 (lldb) \cf0 po [[[0x6000002c51d0 childNodes] objectAtIndex: 0] data]\
\pard\tx529\pardeftab529\pardirnatural

\f2\b0 \cf0 <MBMimeData: 0x6000002a2340> (entity: MBMimeData; id: 0x60800023b900 <x-coredata:///MBMimeData/tDD4F2A8F-B351-4F42-986A-644933A01D7F8> ; data: \{\
    decoded = <50456855 5455772b 50456846 5155512b 44516f38 54555655 5153426a 62323530 5a573530 50534a30 5a586830 4c326830 6257>;\
    encoded = nil;\
    encoding = BASE64;\
    isDecoded = 1;\
    mimeStructure = "0x95f00018b <x-coredata://F8DF9850-2934-4EEF-83C8-34594459A8F5/MBMimeText/p9596>";\
\})\
\pard\tx529\pardeftab529\pardirnatural

\f3\b \cf10 (lldb) \cf0 po [[0x6000002c51d0 childNodes] objectAtIndex: 0]\
\pard\tx529\pardeftab529\pardirnatural

\f2\b0 \cf0 <MBMimeText: 0x6000002c5160> (entity: MBMimeText; id: 0x95f00018b <x-coredata://F8DF9850-2934-4EEF-83C8-34594459A8F5/MBMimeText/p9596> ; data: \{\
    bodyIndex = "2.1";\
    charset = "utf-8";\
    childNodes =     (\
    );\
    data = "0x60800023b900 <x-coredata:///MBMimeData/tDD4F2A8F-B351-4F42-986A-644933A01D7F8>";\
    desc = nil;\
    disposition = "0x308001cb <x-coredata://F8DF9850-2934-4EEF-83C8-34594459A8F5/MBMimeDisposition/p194>";\
    encoding = BASE64;\
    extensions = nil;\
    filename = nil;\
    id = nil;\
    isAttachment = 0;\
    isInline = 1;\
    isLeaf = 1;\
    language = nil;\
    lines = 95;\
    location = nil;\
    md5 = nil;\
    message = nil;\
    messageReference = "0x32b0000ab <x-coredata://F8DF9850-2934-4EEF-83C8-34594459A8F5/MBMessage/p3244>";\
    mime = nil;\
    name = nil;\
    octets = 7352;\
    parameters = "<relationship fault: 0x60000023e5e0 'parameters'>";\
    parentNode = "0x35fc0016b <x-coredata://F8DF9850-2934-4EEF-83C8-34594459A8F5/MBMultiRelated/p3455>";\
    subPartNumber = 1;\
    subtype = HTML;\
    type = TEXT;\
\})\
\pard\tx529\pardeftab529\pardirnatural

\f5\fs24 \cf0 \cb5 \CocoaLigature1 2014-02-25\
	Tip: NSTableView bindings\
		Do not bind tableView.\
		Do bind NSTableColumn to arrayController arrangedObjects with key for column\
		Do bind the text field in the column to the objectValue.key\
\pard\pardeftab720\sl220
\cf0 2014-02-26\
	Tip: Used IB object key value field to add "showsBorderOnlyWhileMouseInside" BOOL=YES so the button only shows the border on hover.\
2014-03-13\
	Charset CP1252\
      	Tip: add breakpoint to NSLog when unknown error pops up and you want to see where it is happening.\
		"
\f3\b\fs22 \cb1 \CocoaLigature0 breakpoint set -n NSLog"\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural
\cf0 	
\f2\b0 \CocoaLigature1 In order to handle address groups, we are going to make every address a potential group.\
	An address group may have no name and an address set of 1 or more.\
	If there is no name, show as a regular address list (no :;).\
2014-03-15\
	TODO: Test to see form of addresses passed to IMAPClientStore.\
		Look at an IMAPResponse during evaluation.\
		Want the IMAPResponse to send the raw string so it is up to the IMAPClientStore or MBMessage to parse the address string.\
	!! Leave it up to the MBMessage to decide how to parse and store address.\
2014-03-19\
	For vCard plugin, use AddressBook framework\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f1\fs38 \cf0 	[ABPerson initWithVCardRepresentation:]\

\fs26 	Returns an 
\f0 ABPerson
\f1  instance initialized with the given data.\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f0 \cf0 	- (id)initWithVCardRepresentation:({\field{\*\fldinst{HYPERLINK "file:///Users/taun/Library/Developer/Shared/Documentation/DocSets/com.apple.adc.documentation.AppleOSX10.9.CoreReference.docset/Contents/Resources/Documents/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSData"}}{\fldrslt NSData}} *)
\f1 vCardData
\f2\fs22 \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural

\f5\fs24 \cf0 2014-04-04\
	IMAPClient notes.\
	Need to create a high level protocol for controlling IMAPClient.\
	IMAPClient needs to be able to say "do this" and take care of making sure there is a connection first, then asynchronously dispatching the commands.\
	Want to leave connection open at end of commands.\
	Dispatched commands need to wait until there is a connection or timeout.\
	iStream needs to continuously handle responses even when commands are not being dispatched.\
	\
	write a method which blocks execution until there is a connection or timeout.\
	add command to front of block and test result before executing rest of command block.\
	basically need a block template like above in which the command can be injected.\
		need to pass a block argument which is the command to execute.\
	Too much work, just hand roll the 2 or 3 top level dispatch methods.\
\
	!! openConnection is blocking. Therefore, can check connection and reconnect in a block. Or only dispatch block if connected?\
	!! Have openConnection check of connection is open already?!\
		Then do \
		if (openConnection) dispatch block. // connection may close before block executes\
		or\
		dispatchBlock ^\{ if (openConnection && !isCancelled) execute commands;\}; // safer?\
2014-04-07\
	Want to get rid of polling during commands.\
	Need a variable for the current network event callback.\
	Queue the command then set the callback.\
	Each time the callback gets called, check whether to move on to the next state.\
	IE. the event callback is the "commandState"\
	How to handle a network timeout? \
		start a timer on network transmit and when timer triggers, state goes to "timedOut"\
		need timer for outgoing success and timer for response\
		what timer is set will depend on the command.\
\
	example:\
		queue command to send - state: waitingToSend...\
		command is partial sent - state: partialSendOf...\
		command is sent, waiting for response - state: waitingForResponse....\
		response is complete - state: commandComplete...\
2014-04-10\
	had forgotten how the parser works and went down a rabbit hole.\
	The parser buffer just keeps filling...\
	Need to go back to one permanent parser which keeps getting evaluated as long as there is a buffer with data.\
	Put the evaluation dispatch the parser evaluation as blocks?\
	Need to remove all of the parser stack and creation/removal code.\
2014-04-11\
	Working new IMAPClient. Much faster!\
	Next\
		* use NSTimer to start IDLE after X seconds of idle.\
		Cancel timer after every transmission so it doesn't fire.\
		Make sure when IDLE does fire, it sets a connectionState = IMAPIdle and send DONE command before next block command.\
		Send DONE in net send command after test for IDLE\
		* what is IDLE response? Write command to handle IDLE responses.\
		
\f1 \cb5 \uc0\u10003 
\f5 \cb1  Block Recurse through folder structure.\
		
\f1 \cb5 \uc0\u10003 
\f5 \cb1   queue a command block within the LIST command block to LIST the folders with HasChildren flag.\
2014-04-19\
	When listing a full 1:max sequence to uid, code queries for every uid every time and takes forever.\
	Skipping the query and just creating a message with the uid is much faster but doesn't work when fleshing out a message body.\
	How to\
		map sequence to uid for syncing cache while not querying for the uid while getting the full sequence?\
		need a separate transient object which is the uid to sequence map?\
		compare separate transient object to cache state?\
		OR drastically improve query?\
	Each IMAPClient has its own dataStore.\
	Each dataStore knows the current selected mailbox and has state information.\
	Can IMAPClient set dataStore state/property information.\
	dataStore can improve UID handling based on state information. Getting a sequence map vs updating actual store data.\
2014-04-20\
	?? 3 modes? 1. FetchingNewUIDs (bypass query) 2. Existing UIDs (use query)\
		1. Full Sync for empty mail box.\
		2. Re-sync for mail box with existing messages and serverHighestModseq\
		3. Map uid sequence? \
	Get sequence for last cached message UID = max UID. Then know number & sequence of new messages.\
2014-04-21\
	DEBUGGING problems\
	
\f1 \cb5 \uc0\u10003  
\f5 \cb1 log when commands are queued and unqueued.\
2014-05-16\
	
\f1 \cb5 \uc0\u10003   
\f5 \cb1 Fix bodystructure generateIndexes. Not working.\
	
\f1 \cb5 \uc0\u10003   
\f5 \cb1 Replace allParts with a recursive method on message based on bodystructure generateIndexes. Just look for leaf, with non-nil bodyindex. Use for getting parts and displaying, ...\
2014-05-20\
	
\f1 \cb5 \uc0\u10003  
\f5 \cb1 How to parse MBMimeMessage in outline view.\
	
\f1 \cb5 \uc0\u10003 
\f5 \cb1  How to display MBMimeMessage in message view\
	? Why did jpg image not load properly once. How robust is loading. If not loaded, it should try again.\
2014-06-18\
	? How to eliminate redundant included messages?\
\pard\pardeftab720\sl220
\cf0 \cb5 		MBVPortal.xib messagesController Content set = self.representedObject.messageArraySource.messages\
		MailBoxesAppDelegate sets messageArraySource to a MBTreeNode instance such as a MBox.\
		Only MBox and MBLabel respond to 'messages'  \
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720\pardirnatural
\cf0 \cb1 	? How to convey 'no network connection" to user? In the message body view?\
		Check for data == nil and display message about no data until replaced by data?\
2014-07-15\
	? Need to have changes to account password updated before connecting.\
2014-07-20\
	* Create network connected/not connected icon for state display on ControlsBox.\
\
}